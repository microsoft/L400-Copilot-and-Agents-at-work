---
title: '02. Create a custom OpenAPI connector'
layout: default
nav_order: 2
parent: 'Exercise 02: Create agents for enterprise integrations'
---

## Task 02: Create a custom OpenAPI connector

### Introduction

Zavaâ€™s hybrid environment requires agents to connect to real business systems through governed, reusable connectors. A custom OpenAPI connector demonstrates how Copilot Studio can securely invoke an external service with schema-defined requests and responses.

### Description

In this task, you'll import an OpenAPI definition and create a custom connector that can be used as a tool by an agent. This connector becomes the marketing system integration point that the marketing child agent will call during execution.

### Success criteria

- The **ZavaOpenAPICall** custom connector is created and available as a usable tool in Copilot Studio.

### Key steps


1. Open a new Edge browser tab and go to [OpenAI_smart_connector\publicpage_openapi.json](https://github.com/microsoft/L400-Copilot-and-Agents-at-work/blob/main/OpenAI_smart_connector/publicpage_openapi.json).

	{: .note }
    > This is the configuration file for the connector. 

1. On the command bar for the **publicpage_openapi.json** page, select **Download raw file**.

	![erhus5of.jpg](../../media/erhus5of.jpg)

	{: .note }
    > Once the file is downloaded, Edge will present a confirmation dialog.
	>
	> ![0bl0a16h.jpg](../../media/0bl0a16h.jpg)

1. Go back to the **Copilot Studio** page, and select the **Marketing-HR-Domain-Router** agent.

1. In the left pane for the agent, select **Tools**.

	![gykw5ch3.jpg](../../media/gykw5ch3.jpg)

1. Select **+ New tool**.

	![1cjz4v8v.jpg](../../media/1cjz4v8v.jpg)

1. In the **New tool** dialog, select **Custom connector**.

	![7fp1r40n.jpg](../../media/7fp1r40n.jpg)

	{: .note }
	> A new browser window opens. You are directed to the Power Apps maker portal. You use the maker portal to create custom connectors. Then, you can access and use the connectors from the Tools page for the agent.

1. If prompted, sign in by using the following credentials:

    | Item | Value |
    | ---- | ----- |
    | Username | `@lab.CloudPortalCredential(User1).Username` |
    | Temporary Access Pass (TAP) token | `@lab.CloudPortalCredential(User1).AccessToken` |

	{: .warning }
    > You are redirected to the Power Apps maker portal **Custom connectors** page.

	![fzu5d9q8.jpg](../../media/fzu5d9q8.jpg)

1. On the command bar, select **+ New custom connector**.

	![loadduij.jpg](../../media/loadduij.jpg)

1. Then select **Import an OpenAPI file**.

	![3epayqq0.jpg](../../media/3epayqq0.jpg)

1. In the **Import an OpenAPI file** dialog, in the **Connector name** field, enter `ZavaOpenAPICall`. Then, select **Import**.

	![u1i9uzp1.jpg](../../media/u1i9uzp1.jpg)

1. In the File **Open** dialog, go to the **Downloads** folder. Select **publicpage_openapi.json** and then select **Open**.

	![2fvbnk63.jpg](../../media/2fvbnk63.jpg)

1. In the **Import an OpenAPI file** dialog, select **Continue**.

	![d6p31l5r.jpg](../../media/d6p31l5r.jpg)

1. On the command bar for the connector, select **Create connector**.

	![fvxegpde.jpg](../../media/fvxegpde.jpg)

1. Wait until the connector configuration process completes.

	{: .note }
    > On the command bar, **Create connector** changes to **Update connector** when configuration is complete.

	![urtugs3s.jpg](../../media/urtugs3s.jpg)
	
1. Select **Close**.

1. Close the Power Apps page and return to the **Copilot Studio** page.

1. Refresh the **Tools** page. the **ZavaOpenAPICall** tool will display.

	![vzsi3oq2.jpg](../../media/vzsi3oq2.jpg)