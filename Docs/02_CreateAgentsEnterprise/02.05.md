---
title: '05. Create a child agent to handle HR inquiries'
layout: default
nav_order: 5
parent: 'Exercise 02: Create agents for enterprise integrations'
---

## Task 05: Create a child agent to handle HR inquiries 

### Introduction

HR data is sensitive and must be accessed through tightly controlled interfaces. Zava’s governance expectations require HR questions to be answered through authenticated tools, with clear separation from other business domains.

### Description

In this task, you'll create **HRInquiryAgent** as a child agent and connect it to the deployed MCP server using the provided base URL and API key. You'll then update the parent routing agent so HR requests are delegated to HRInquiryAgent and tested end to end.

### Success criteria (single-line, result-only)

- **HRInquiryAgent** connects to the HR MCP server and returns correct HR directory results when routed a sample HR prompt by the parent agent.

### Key steps

---

#### 01: Create the agent

1. On the command bar of the **Marketing‑HR‑Domain‑Router** agent, select **Agents**.

	![h4j0s57k.jpg](../../media/h4j0s57k.jpg)

1. Select **Add an agent**.

	![thjan1yy.jpg](../../media/thjan1yy.jpg)

1. Select **New child agent**.

	![aozvr0mj.jpg](../../media/aozvr0mj.jpg)

1. Provide the following details:
	- **Agent Name:** `HRInquiryAgent`
    - **When will this be used?:** `The agent chooses - Based on description`
	- **Agent Description:** 

	```
	HRInquiryAgent is an internal HR directory assistant that helps employees quickly find HR team members by skill, role, language, or name. It provides clear, concise answers based on the available HR staff data, helping users identify the right HR contact for recruitment, onboarding, performance management, training, employee relations, and other HR needs.
	```

1. Add the following text to the **Instructions** section.

	```
	You are an HR‑specialized child agent.
	Any inquiry involving HR topics - including but not limited to hiring, recruiting, employee data, skills, languages, onboarding, offboarding, compensation, benefits, training, employee relations, conflict resolution, performance management, workforce planning, HR analytics, or any request referencing HR personnel (such as John Doe, Jane Smith, Alice Johnson, Bob Brown, Emily Davis) - must be handled exclusively by calling the  HRMCPServer Tool.
	You must NOT answer HR questions directly. You must NOT generate your own HR content.
	If the user asks anything outside HR, politely decline and tell them to ask the primary assistant.
	When uncertain, assume the request is HR‑related and use the HRMCPServer Tool.
	```

1. Select **Save**.


1. On the command bar for the child agent, select **Tools**.

	![bo35bsuo.jpg](../../media/bo35bsuo.jpg)

1. Select **+ Add a tool**. 

	![wmprz328.jpg](../../media/wmprz328.jpg)

1. Select **Model Context Protocol**.

	![23f6tkgs.jpg](../../media/23f6tkgs.jpg)

1. Provide the following details under **Model Context Protocol**:
	- **Server Name:** `HRMCPServer`
    
    - **Server description:** 
        ```
        This file contains a structured list of HR professionals, each with their name, contact information, spoken languages, key skills, and current HR role.
        ```

	![21luxp3e.jpg](../../media/21luxp3e.jpg)

1. Go to the virtual machine desktop, locate the **MCP_Info.txt** file, and open it.

	![undjfb72.jpg](../../media/undjfb72.jpg)

1. Copy the **MCP Base URL** value from the **MCP_Info.txt** file you just opened.

	![l5x2tp05.jpg](../../media/l5x2tp05.jpg)

1. Go back to **Copilot Studio** and paste the URL into the **Server URL** field. 

	![b331zeir.jpg](../../media/b331zeir.jpg)

1. In the **Authentication** section, select **API Key**.

1. In the **MCP_Info.txt** file, copy the **Header Name** value.

	![c40zwg3a.jpg](../../media/c40zwg3a.jpg)

1. Go back to **Copilot Studio** and paste this value into the **Header Name** field.

	![eq9nthh1.jpg](../../media/eq9nthh1.jpg)

1. Select **Create**. Wait for the confirmation message to appear.

	![phicsg1r.jpg](../../media/phicsg1r.jpg)

1. Open the dropdown next to **Not connected** and then select **Create new connection**.

	![dane1ho6.jpg](../../media/dane1ho6.jpg)


1. In the **MCP_Info.txt** file, copy the value of the **API Key**. 

	![js9rye0a.jpg](../../media/js9rye0a.jpg)

1. Return to **Copilot Studio** and paste in the key.

	![z0af8lna.jpg](../../media/z0af8lna.jpg)

1. Select **Create**.

	![xn7jgyhh.jpg](../../media/xn7jgyhh.jpg)

1. Wait for the green checkmark to display next to your MCP Server name. This means you're all set. 

1. Select **Add and configure** then wait until the process completes.

	![gru03k3g.jpg](../../media/gru03k3g.jpg)

1. Upon completion, the MCP Server is added as a tool to your child agent.
	
	![clvnugi6.jpg](../../media/clvnugi6.jpg)

1. To ensure our connection is ready, select **settings** and then go to **Connection Settings**.

1. Select **Connect** and then select **Submit**.

1. Wait until the **Status** is **Connected** and then exit **Settings**. 

	![dwt22093.jpg](../../media/dwt22093.jpg)

---

#### 02: Update the parent agent instructions

1. On the command bar for **Marketing-HR-Domain-Router**, select **Overview**.

	![efrhrvwx.jpg](../../media/efrhrvwx.jpg)

1. In the **Instructions** tile, select **Edit**. Search for and select **If Marketing, delegate to HRInquiryAgent.** 

1. Highlight **HRInquiryAgent**, press Delete, then type **/**. Select the **HRInquiryAgent** agent from the list.

	![xontghn9.jpg](../../media/xontghn9.jpg)

1. Select **Save** and then select **Publish**.

1. Start a new test session and submit the following prompts. Review the responses.

	- MCP HR Test prompt 1: 
    
        ```
        Who should I contact for employee relations?
        ```

	![qfmrfe8u.jpg](../../media/qfmrfe8u.jpg)
	
    - MCP HR Test prompt 2: 
        ```
        Who can assist me with the onboarding and training process and also speak French?
        ```

	![mkyfqs26.jpg](../../media/mkyfqs26.jpg)
	
    - Marketing Test prompt 1: 
        ```
        Which category generated the highest revenue in Nov-Dec 2025, and what percentage of total net revenue did it represent? Also compare its average ticket to the overall AOV.
        ```
	
    - Marketing Test prompt 2: 
        ```
        Which promotion was most efficient (lowest discount‑to‑revenue ratio), and what was its average discount per order and share of total orders?
        ```

	![tx0smrtv.jpg](../../media/tx0smrtv.jpg)
