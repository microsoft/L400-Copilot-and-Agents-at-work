---
title: '04. Create a child agent to handle marketing inquiries'
layout: default
nav_order: 4
parent: 'Exercise 02: Create agents for enterprise integrations'
---

## Task 04: Create a child agent to handle marketing inquiries

### Introduction

Zava needs domain-specific agents that can act on enterprise tools while staying within clear scope. The marketing agent must use approved connectors for marketing actions and avoid answering outside its domain.

### Description

In this task, you'll create **MarketingInquiryAgent** as a child agent and attach the OpenAPI connector as its required tool. You'll configure the agent instructions so it answers marketing requests only through the tool and declines non-marketing intents.

### Success criteria

- **MarketingInquiryAgent** successfully handles a marketing prompt by calling the marketing tool and returning a grounded response.

### Key steps

---

#### 01: Create the child agent

1. Return to the **Copilot Studio** page.

1. Select **Agents** and then select **Marketing-HR-Domain-Router**.

	![6vdhdmnl.jpg](../../media/6vdhdmnl.jpg)

1. On the command bar, select **Agents** and then select **+ Add**.

	![0szccy7y.jpg](../../media/0szccy7y.jpg)

1. Select **New child agent**.

	![809c6h9l.jpg](../../media/809c6h9l.jpg)

1. Perform the following tasks:
	- **Agent Name:** `MarketingInquiryAgent`
    - **When will this be used?:** `The agent chooses - Based on description`
	- **Agent Description:** 
        ```
        This agent processes all marketing‑related inquiries, including campaigns, branding, digital assets, analytics, and interactions with systems such as CRM, MAP, and DAM, while upholding established marketing standards and escalating any out‑of‑scope or non‑marketing intents to the parent orchestrator for proper handling. It can also invoke a custom API to retrieve or update campaign data, access approved brand assets, trigger marketing workflows, or perform other system‑level operations, using secure authentication, schema‑validated payloads, and audited request and response logging.
        ```

1. Select **Save**.

1. In the left pane, select **Tools** and then select **Add tool**. 

	![9mrd9e6m.jpg](../../media/9mrd9e6m.jpg)

1. Search for and select `ZavaOpenAPICall` then press enter.

	![23tg2i8t.jpg](../../media/23tg2i8t.jpg)

1. Select the newly created tool, **ZavaOpenAPICall**.

	![9wol8nu7.jpg](../../media/9wol8nu7.jpg)

1. Next to **Connection**, select the dropdown, and then select **Create new connection**.

	![njqwv53i.jpg](../../media/njqwv53i.jpg)

1. Select **Create**.

	![vxws5l98.jpg](../../media/vxws5l98.jpg)

1. Select **Add and configure**.

	![92n88718.jpg](../../media/92n88718.jpg)

1. Select **Settings** and then select **Connection Settings**.

	![e9py3rl0.jpg](../../media/e9py3rl0.jpg)

1. Select **Connect** and then select **Submit**. 

	![yuebiu8v.jpg](../../media/yuebiu8v.jpg)

1. Wait until the **status** is **Connected** and then exit **Settings**. 

1. On the **Marketing-HR-Domain-Router** page, select **Agents**.

	![9fp6mqxg.jpg](../../media/9fp6mqxg.jpg)

1. Select the **MarketingInquiryAgent** child agent.

1. Select **Instructions** and enter the following text:

	```
    For any inquiry related to marketing, respond only by using [tool] the Marketing tool. For all non‑marketing inquiries, decline and direct the user to their primary assistant. Do not answer marketing questions without calling the MarketingTool.
    ```

1. Highlight **[tool]**, delete it, press **/**, go to **Tool**, then select **Get Marketing Data (Raw)**.

	![4w3yxrn9.jpg](../../media/4w3yxrn9.jpg)

1. Select **Save**.

	![hw0bdqsj.jpg](../../media/hw0bdqsj.jpg)

1. Start a new test session and submit the following prompt: 

	```
    Can you please concisely explain why the marketing team wants to open a couple of new stores?
    ```

	{: .note }
    > It may take a moment to respond because it needs to access external resources, and the GPT model is performing deep reasoning. Once it completes, notice how **Marketing‑HR‑Domain‑Router** was able to route the request to **MarketingInquiryAgent**, its child agent.

	![yb2z2bwj.jpg](../../media/yb2z2bwj.jpg)


---

#### 02: Refine the parent agent's instructions to reinforce its redirect‑thinking process.

1. Select the **Overview** tab of the parent agent, **Marketing‑HR‑Domain‑Router**.

	![k6wdqqn0.jpg](../../media/k6wdqqn0.jpg)

1. In the **Instructions** tile, select **Edit**.

1. Locate the text `If Marketing, delegate to MarketingInquiryAgent.` 

1. Highlight **MarketingInquiryAgent**, press delete, enter `/`, then select the **MarketingInquiryAgent** agent.

	![yjdxt8mz.jpg](../../media/yjdxt8mz.jpg)

1. Select **Save**.
